        -:    0:Source:C:/Users/JackyChang/Desktop/tutorial/RailSystem/src/List.ads
        -:    0:Programs:38
        -:    1:
        -:    2:--  Simple Linked List support
        -:    3:
        -:    4:--  This package provides an implementation of a linked list to
        -:    5:--  store any data type. The list provides with common functions
        -:    6:--  for retrieving and storing elements in the list.
        -:    7:
        -:    8:--  To use the list first (after instantiating the package) create a
        -:    9:--  variable of type LIST_PTR and then use the new operator.
        -:   10:--
        -:   11:--      var1 : LIST_PTR;
        -:   12:--  	var1 := new LIST;
        -:   13:--
        -:   14:--  After that you can begin using the list methods to insert, remove
        -:   15:--  or modify its content.
        -:   16:
        -:   17:pragma SPARK_Mode (On);
        -:   18:
        -:   19:
        -:   20:generic
        -:   21:
        -:   22:   type DATA_TYPE is PRIVATE;
        5:   23:   E_ID:Natural;
        -:   24:--     MAX_SIZE:Positive;
        6:   25:   NO_FOUND: DATA_TYPE;
        -:   26:
        -:   27:package LIST is
        -:   28:
        -:   29:   --  DATA_TYPE specifies the type of the data that will be stored in
        -:   30:   --  the list while SIZE_TYPE is a integer range that specifies the
        -:   31:   --  values of the index to acess the list.
        -:   32:
        -:   33:   --  NO_FOUND will be returned if a search method is called and no
        -:   34:   --  element matched it.
        -:   35:
        -:   36:   type DATA is private;
        6:   37:   OUT_OF_BOUNDS: exception;
        -:   38:   --  Raised when accesing elements outside the valid range of the list
        -:   39:
        -:   40:
        -:   41:      type LIST_PTR(MAX_SIZE: Positive ) is private ;
        -:   42:--     type List_PTR is private;
        -:   43:   --  Private type for a List
        -:   44:
        -:   45:
        -:   46:   ---------------------
        -:   47:   -- Methods of LIST --
        -:   48:   ---------------------
        -:   49:   function CONTAINS ( A: LIST_PTR; D: in DATA_TYPE) return Boolean;
        -:   50:
        -:   51:   function GET_LAST(A: LIST_PTR) return DATA_TYPE;
        -:   52:
        -:   53:   function GET_SIZE ( A: LIST_PTR ) return Natural;
        -:   54:   --  Returns the current size of the list, which is 0 if empty
        -:   55:
        -:   56:   function GET_ELEMENT( A: LIST_PTR ; LOCATION: Natural ) return DATA_TYPE;
        -:   57:   --  Returns an element at the specified LOCATION.
        -:   58:   --  If the element don't exist it returns NO_FOUND. Don't raise OUT_OF_BOUNDS
        -:   59:   function GET_ELEMENT_BY_ID( A: LIST_PTR ; ID: Natural ) return DATA_TYPE;
        -:   60:
        -:   61:   function FULL ( A : in LIST_PTR) return Boolean;
        -:   62:
        -:   63:   procedure DELETE_LAST(A: in out LIST_PTR);
        -:   64:
        -:   65:   procedure APPEND ( A: in out  LIST_PTR ; D: in DATA_TYPE; ID: in Natural  )
        -:   66:   with
      738:   67:       Pre =>(ID > 0
      738:   68:              and ID <= A.MAX_SIZE
        -:   69:--                and (if ID > 0  and ID < 101 then ( for all Index in 1 .. GET_SIZE(A)
        -:   70:--                  =>GET_ELEMENT(A,Index) /= D))
        -:   71:         );
        -:   72:
        -:   73:   --  Add the new element at the back of the list and increments the list size
        -:   74:
        -:   75:--     procedure APPEND_TO_FIRST ( A: in out  LIST_PTR ; D: in DATA_TYPE; ID: in Natural);
        -:   76:   --  Add the new element at the first of the list and increments the list size
        -:   77:
        -:   78:   procedure DELETE_ALL (A: in out LIST_PTR );
        -:   79:   --  Empty the list and put its size to 0
        -:   80:
        -:   81:--     procedure SWAP( A: in out LIST_PTR; FIRST: Natural; SECOND: Natural);
        -:   82:   --  Interchange elements inside the list.
        -:   83:   --  If the first and second positions are out of bound then
        -:   84:   --  OUT_OF_BOUNDS is raised.
        -:   85:
        -:   86:--     procedure REPLACE( A: in out LIST_PTR; LOCATION: Natural; NEWVALUE: DATA );
        -:   87:   --  Replace an element inside the list with a new value in the specified
        -:   88:   --  location.
        -:   89:   --  If location is out of bounds then OUT_OF_BOUNDS is raised.
        -:   90:   procedure REPLACE_BY_ID( A: in out LIST_PTR; ID: Natural; NEWVALUE: DATA_TYPE );
        -:   91:   --  Replace an element inside the list with a new value in the specified
        -:   92:   --  location.
        -:   93:   --  If location is out of bounds then OUT_OF_BOUNDS is raised.
        -:   94:   procedure Init(A: in out LIST_PTR);
        -:   95:
        -:   96:private
        -:   97:
  1763600:   98: type DATA is
        -:   99:      record
   881800:  100:         DATA: DATA_TYPE;
        -:  101:         ID: Natural:=E_ID;
        -:  102:      end record;
        -:  103:   -- List implementation
        -:  104:
        -:  105:
   881800:  106:   type List_Array is array (Positive range <>) of DATA;
  1772418:  107:   type LIST_PTR(MAX_SIZE: Positive ) is
        -:  108:--     type LIST_PTR is
        -:  109:      record
        -:  110:         SIZE: Natural:=E_ID;
     8818:  111:         ELEMENTS: List_Array(1 .. MAX_SIZE);
        -:  112:         HEAD: Positive:=1;
        -:  113:      end record;
        -:  114:
        -:  115:end LIST;
